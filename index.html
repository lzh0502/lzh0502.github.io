<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>请喝奶茶~</title>
  <style>
    body {
      background: #FFC0CB;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: Arial;
    }
    .img-box img {
      max-width: 200px;
      max-height: 200px;
      margin: 10px 0;
    }
    .text-box {
      font-size: 14px;
      margin: 10px 0;
      color: #333;
      text-align: center;
      padding: 0 20px;
    }
    .btn-box {
      display: flex;
      align-items: center;
    }
    #agreeBtn {
      background: #4682B4;
      color: white;
      border: none;
      padding: 8px 16px;
      font-size: 10px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 20px;
    }
    #noBtn {
      background: #FF4500;
      color: white;
      border: none;
      padding: 8px 16px;
      font-size: 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    .thank-text {
      font-size: 16px;
      margin: 10px 0;
      display: none;
    }
  </style>
</head>
<body>
<div class="img-box">
  <img id="teaImg" src="../image/01.jpg" alt="奶茶图片">
</div>
<div class="text-box" id="teaText">可以请我喝一杯霸王茶姬吗</div>
<div class="btn-box" id="btnBox">
  <button id="agreeBtn" onclick="showThank()">同意</button>
  <button id="noBtn" onclick="clickNo()">不行</button>
</div>
<div class="thank-text" id="thankText">谢谢宝宝好喜欢你(≧∇≦)ﾉ</div>

<script>
  // RequestData类（对应原来的RequestData.java）
  class RequestData {
    constructor(text, image) {
      this.text = text;
      this.image = image;
    }

    getText() {
      return this.text;
    }

    getImage() {
      return this.image;
    }
  }

  // 初始化数据（对应原来的MilkTeaServlet.java中的数据）
  const getRequestList = () => {
    const dataList = [];
    dataList.push(new RequestData("可以请我喝一杯霸王茶姬吗", "../image/01.jpg"));
    dataList.push(new RequestData("那一点点怎么样？", "../image/02.jpg"));
    dataList.push(new RequestData("CoCo也不错哦~", "../image/03.jpg"));
    dataList.push(new RequestData("蜜雪冰城总可以吧？", "../image/04.jpg"));
    dataList.push(new RequestData("冰红茶也行啊！", "../image/05.jpg"));
    return dataList;
  };

  // 页面逻辑
  document.addEventListener('DOMContentLoaded', () => {
    // 获取数据
    const requestData = getRequestList();
    const thankImg = "../image/11.jpg";

    let currIndex = 0;
    let moveStep = 0;

    // 获取页面元素
    const imgEl = document.getElementById("teaImg");
    const textEl = document.getElementById("teaText");
    const agreeBtn = document.getElementById("agreeBtn");
    const noBtn = document.getElementById("noBtn");
    const btnBox = document.getElementById("btnBox");
    const thankText = document.getElementById("thankText");

    // 添加调试信息
    console.log("图片初始路径:", imgEl.src);
    console.log("图片数据数组:", requestData);

    // 同意按钮点击事件
    window.showThank = () => {
      console.log("点击同意按钮");
      textEl.style.display = "none";
      btnBox.style.display = "none";
      imgEl.src = thankImg;
      console.log("感谢图片路径:", thankImg);
      thankText.style.display = "block";
      setTimeout(() => window.close() || (window.location.href = "about:blank"), 3000);
    };

    // 不行按钮点击事件
    window.clickNo = () => {
      console.log("点击不行按钮");
      if (currIndex >= requestData.length - 1) return;

      currIndex++;
      textEl.textContent = requestData[currIndex].getText();
      imgEl.src = requestData[currIndex].getImage();
      console.log("当前图片路径:", requestData[currIndex].getImage());

      // 增大同意按钮
      const currFont = parseInt(getComputedStyle(agreeBtn).fontSize);
      agreeBtn.style.fontSize = (currFont * 2) + "px";

      // 移动不行按钮
      moveStep += 50;
      noBtn.style.marginLeft = moveStep + "px";

      // 最后一次点击
      if (currIndex === requestData.length - 1) {
        noBtn.disabled = true;
        noBtn.style.display = "none";
        agreeBtn.style.margin = "0 auto";
        btnBox.style.justifyContent = "center";
      }
    };
  });
</script>
</body>
</html>